<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>CryoTech | Página Inicial</title>

  <link rel="stylesheet" href="css/estilo.css" />
  <link rel="icon" href="css/Imagens/logo1.png" />

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
</head>

<body>
  <div class="header">
    <div class="container">
      <ul class="navbar">
        <li >
          <a href="index.html">Pagina Inicial</a>
        </li  class="agora">
        <li>
          <a href="calcfinanceira.html">Calculadora financeira</a>
        </li>
        <li><img onclick="imagem()" src="css/Imagens/logo1.png" alt="" /></li>
        <li class="navbar-button">
          <button onclick="cadastrar()">Cadastre-se</button>
          <button onclick="login()" id="abrirModal">Login</button>
        </li>
      </ul>
    </div>
  </div>
<!-- Inicio calculadora  -->
  <div class="modal" id="modal">
    <img src="../Site/css/Imagens/logo1.png" alt="" />
    <span class="fechar" id="fecharModal"> Fechar</span>
    <h2>Faça seu login</h2>
    <input id="email_input" type="email" placeholder="E-mail" />
    <input id="senha_input" type="password" placeholder="******" />
    <div id="div_msglogin"></div>
    <button onclick="logar()">Enviar</button>
  </div>
<div id="calculadora" class="calculadora">
      <div class="container">
        <div class="formulario-calculadora">
          <div class="card1">
            <h2>Faça uma projeção com a <span>Cryo</span>Tech</h2>
            <label class="checkbox-label">
              <input type="checkbox" id="box_1" onclick="alternarDiv()" />
              Câmaras Frias
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="box_2" onclick="alternarDiv()" />
              Freezers
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="box_3" onclick="alternarDiv()" />
              Veículos refrigerados-
            </label>
          </div> <br><br>
          <div class="label-input">

            <div class="card2">
              <div id="div_camf" style="display: none">
                <label for="input_numCamaras">Aréa total das câmaras frias em M²</label>
                <input type="number" id="input_numCamaras" placeholder="Ex: 30"
                  oninput="atualizarMensalidade()" /><br />
              </div>

              <div id="div_freezer" style="display: none">
                <label for="input_numFreezers">Quantidade de freezers</label>
                <input type="number" id="input_numFreezers" placeholder="Ex: 30"
                  oninput="atualizarMensalidade()" /><br />
              </div>

              <div id="div_refrigerado" style="display: none">
                <label for="input_numVeiculos">Quantidade de veículos refrigerados</label>
                <input type="number" id="input_numVeiculos" placeholder="Ex: 15"
                  oninput="atualizarMensalidade()" /><br />
              </div>

              <label for="input_mensalidade">Valor da mensalidade:</label>
              <input style="font-weight: bold;" disabled type="number" id="input_mensalidade" value="1500" /><br>

              <label for="input_nome">Produto em estoque:</label>
              <input type="text" id="input_nome" placeholder="Ex: Carne - Peixe - Frango" value="carne"/>
              <br />
              <label for="input_valorKg">Valor do Kg (R$): </label>
              <input type="number" id="input_valorKg" placeholder="Ex: R$90,00" value="70" />
              <br />
              <label for="input_estoque">Quantidade em estoque (Ton): </label>
              <input type="number" id="input_estoque" placeholder="Ex: 3 Toneladas" value="4" />
              <br />
              <label for="input_perda">Perda mensal atual (%): </label>
              <input type="number" id="input_perda" placeholder="Ex: 40" value="40" />
            </div>
            <br />
          </div>

        </div>
        <div id="resultado" class="resultado">
          <h4></h4>
          <p style="font-weight: bolder;" id="p_resultado">Após preencher os campos corretamente <br>
            clique no botão abaixo</p>
          <button onclick="calcular()">Simular</button>
        </div>

      </div>

    </div>

    <div style="display: none;" class="popup" id="popup">

        <div class="msg-popup" id="msg-popup">

          <div>
            <div class="sem-servico">
            <h1>Sem nosso serviço:</h1>
            <p class="msg-sem-servico" id="msg_sem_servico"></p>
          </div>

          <div class="com-servico">
            <h1>Com nosso serviço:</h1>
            <p class="msg-com-servico" id="msg_com_servico"></p>
          </div>
          </div>

          <button onclick="fechar_popup()">OK</button>
          
        </div>

      </div>
        <div class="footer">
    <div class="footer-container">
      <div class="footer-logo">
        <h2>CryoTech</h2>
        <p>Garantindo a temperatura ideal do início ao fim da cadeia de frio.</p>
      </div>

      <div class="footer-links">
        <a href="index.html">Início</a>
        <a href="#solucoes">Soluções</a>
        <a href="calcfinanceira.html">Calculadora</a>
        <a href="#contato">Contato</a>
      </div>

      <div class="footer-copy">
        <p>&copy; 2025 CryoTech. Todos os direitos reservados.</p>
      </div>
    </div>
  </div>
    
  </body>
  <script>
  function calcular() {
    var nome = input_nome.value;
    var valorKg = Number(input_valorKg.value);
    var estoqueKg = Number(input_estoque.value) * 1000;
    var pctPerda = Number(input_perda.value);
    var valorServico = Number(input_mensalidade.value);
    
    if (!nome || valorKg <= 0 || estoqueKg <= 0 || pctPerda < 0 ) {
      alert("Por favor, preencha todos os dados corretamente.");
      return;
    } else {
      popup.style.display = 'flex';

      var valorEstoque = valorKg * estoqueKg;
      var perdaAtual = (pctPerda / 100) * valorEstoque;
      var perdaComServico = perdaAtual * 0.2;
      var taxaUnica = 4000;

      var estoquePreservado = valorEstoque - perdaAtual;
      var estoquePreservadoServico =
      valorEstoque - perdaComServico - valorServico;
      var economiaMensal = perdaAtual - perdaComServico - valorServico;

      msg_sem_servico.innerHTML = `
        <p>Produto: <b>${nome}</b></p><br>
        Valor total do estoque: <b>${valorEstoque.toLocaleString("pt-br", {
          style: "currency",
          currency: "BRL",
        })}</b><br><br>
        Perda mensal: <b style='color: red'>${perdaAtual.toLocaleString("pt-br", {
          style: "currency",
          currency: "BRL",
      })}</b><br><br>
      Estoque aproveitado: <b style='color: red'>${estoquePreservado.toLocaleString("pt-br", {
        style: "currency",
        currency: "BRL",
      })}</b><br><br>
      <hr>`;

      msg_com_servico.innerHTML = `
      <p>Custo mensal do serviço: <b>${valorServico.toLocaleString("pt-br", {
        style: "currency",
        currency: "BRL",
      })}</b></p>
      <p>Perda reduzida: <b style='color: green'>${perdaComServico.toLocaleString("pt-br", {
        style: "currency",
        currency: "BRL",
      })}</b></p>
      <p>Estoque aproveitado: <b style='color: green'>${estoquePreservadoServico.toLocaleString(
        "pt-br",
        { style: "currency", currency: "BRL" }
      )}</b></p><br>
    
      <hr>
    
      <p><b>Aumento na eficiência de estoque:</b> 
      <span style="color: green;">${((estoquePreservadoServico / estoquePreservado - 1) * 100).toFixed(1)}%</span></p>

      <p><b>Economia líquida mensal:</b> 
      <b style='color: green; font-size: 1.2em;'>${economiaMensal.toLocaleString("pt-br", {
        style: "currency",
        currency: "BRL",
      })}</b></p>
`;
        
        p_resultado.innerHTML = `
        <b>Produto:</b> <b>${nome}</b><br>
        Valor total do estoque: <b>${valorEstoque.toLocaleString("pt-br", {
          style: "currency",
          currency: "BRL",
        })}</b><br><br>
        <b>Situação atual:</b><br>
        Perda mensal: <b>${perdaAtual.toLocaleString("pt-br", {
          style: "currency",
          currency: "BRL",
      })}</b><br>
      Estoque aproveitado: <b>${estoquePreservado.toLocaleString("pt-br", {
        style: "currency",
        currency: "BRL",
      })}</b><br><br>
      
      <b>Com nossa solução</b><br>
      Taxa única de implantação: <b>${taxaUnica.toLocaleString("pt-br", {
        style: "currency",
        currency: "BRL",
      })}</b><br>
      Valor da instalação + mão de obra: ${instalacao.toLocaleString("pt-br", {
        style: "currency",
        currency: "BRL",
      })} <br> 
      Custo mensal do serviço: <b>${valorServico.toLocaleString("pt-br", {
        style: "currency",  
        currency: "BRL",
      })}</b><br>
      Perda reduzida: <b>${perdaComServico.toLocaleString("pt-br", {
        style: "currency",
        currency: "BRL",
      })}</b><br>
      Estoque aproveitado: <b>${estoquePreservadoServico.toLocaleString(
        "pt-br",
        { style: "currency", currency: "BRL" }
      )}</b><br><br>
      
      <b>Economia líquida mensal:</b> <b>${economiaMensal.toLocaleString(
        "pt-br",
        { style: "currency", currency: "BRL" }
      )}</b>
      `;
      }
    }

    function fechar_popup() {
      popup.style.display = 'none';

    }
    
  var mensalidadeTotal = 0;
  var instalacao = 0;

  function atualizarMensalidade() {
    var numCamaras = Number(input_numCamaras.value);
    var numFreezers = Number(input_numFreezers.value);
    var numVeiculos = Number(input_numVeiculos.value);
    var sensoresTotais = (numCamaras/5) + numFreezers + numVeiculos;
    var taxaUnica = 4000;
    var mensalidadeBase = 1500;
    var extraCamaras = Math.floor(numCamaras / 10) * 150;
    var extraFreezers = Math.floor(numFreezers / 2) * 100;
    var extraVeiculos = Math.floor(numVeiculos / 2) * 200;

    mensalidadeTotal =
      mensalidadeBase + extraFreezers + extraCamaras + extraVeiculos;
    input_mensalidade.value = mensalidadeTotal;

    instalacao = taxaUnica + (sensoresTotais * 200);
  }

function alternarDiv() {
  var checkbox1 = document.getElementById("box_1");
  var checkbox2 = document.getElementById("box_2");
  var checkbox3 = document.getElementById("box_3");

  if (checkbox1.checked) {
    div_camf.style.display = "block";
  } else {
    div_camf.style.display = "none";
  }

  if (checkbox2.checked) {
    div_freezer.style.display = "block";
  } else {
    div_freezer.style.display = "none";
  }

  if (checkbox3.checked) {
    div_refrigerado.style.display = "block";
  } else {
    div_refrigerado.style.display = "none";
  }
}

  function logar() {
    var email = email_input.value;
    var senha = senha_input.value;
    if ((email == 'gabrielsenna@email.com' || email == 'cryotech@email.com') && (senha == 'cryotech')) {
      window.location.href = "dashboard-projeto.html"

    } else {
      div_msglogin.innerHTML = ` <p style="color: red;">Falha no login</p>`
    }

  }

  function login() {
    var modal = document.getElementById("modal");
    modal.classList.add("ativo");
    document.getElementById("fecharModal").onclick = () =>
      modal.classList.remove("ativo");
    window.onclick = (e) => {
      if (e.target === modal) modal.classList.remove("ativo");
    };
  }

  function cadastrar() {
    window.location.href = "cadastro.html";
  }

function imagem() {
    window.location.href = "index.html";

  } 
  </script>